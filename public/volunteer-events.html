<!DOCTYPE html>
<html lang="en">

    <head>
        <title>Volunteer's Page</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        <script src="assets/js/register.js"></script>
        <style>
            .row-event {
                height: 30vh;
            }

            .event-row {
                background-color: lightcoral;
                max-width: 80%;
                margin-left: 10%;
            }

            .event-form-group {
                /* font-weight: bold; */
                color: white;
                max-width: 60%;
                margin-left: 10px;
            }

            .modal-content-event {
                color: white;
            }

            .modal-content-event {
                /* color: orange; */
                background-color: lightskyblue;
            }
        </style>
    </head>

    <body>
        <!-- JUMBOTRON -->
        <div class="jumbotron">
            <div class="container text-center">
                <h1>All Event Listings</h1>
                <h2>See below for available polling opportunities!</h2>
            </div>
        </div>
        <!-- END JUMBOTRON -->

        <div class="container-fluid sm-3 text-center event-box">
            <div class="event-row" "col-md-3 col-md-offset-3">Placeholder: THIS IS WHERE THE EVENT LISTING WILL GO
                <p>Polling Station: </p>
                <p>Address: </p>
                <p>Shifts available(dropdown): </p>
        
                <div>
                    <!-- <button class="btn btn-primary" id="eventreg" type="submit" data-toggle="modal" data-target="#myModal">Sign Up!</button> -->
                    <a href="/login"><button class="btn btn-lg" id="eventreg">Click here to register</button></a>
                </div>
            </div>
        </div>                        
                    
                    
        <footer class="container-fluid text-center">
            <p>Footer Text</p>
        </footer>

        <script>
        $(document).ready(function () {
                //api call events which would return array of events
                //.then for (var i = 0; )
                var events;

                function getEvents() {
                    $.get("/api/eventlistings", function (data) {
                        if (data.length !== 0) {
                            for (var i = 0; i < data.length; i++) {
                                var row = $("<div>");
                                row.append("<p>Event name: " + data[i].event_title + "<p>");
                                row.append("<p>Event name: " + data[i].event_description + "<p>");
                                row.append("<p>Event name: " + data[i].organization_name + "<p>");
                                row.append("<p>Event name: " + data[i].organizer_first_name + "<p>");
                                row.append("<p>Event name: " + data[i].organizer_last_name + "<p>");
                                row.append("<p>Event name: " + data[i].street_address + "<p>");
                                row.append("<p>Event name: " + data[i].city + ", " + data[i].state + " " + data[i].zip_code + "<p>");
                                row.append("<p>Event name: " + data[i].state + "<p>");
                                row.append("<p>Event name: " + data[i].phone_number + "<p>");
                                row.append("<p>Event name: " + data[i].time_slots + "<p>");

                                $("#event-box").prepend(row);

                            };
                        };
                    });
                };


                getEvents();
                $("#eventreg").on("click", function (post) {
                    event.preventDefault();
                    alert("You are registered for the event!");
                    $.ajax('/api/events')({
                        method: "PUT",
                        url: "/api/postreg",
                        data: post
                    })
                        .then(function (events) {
                            window.location.href = "/volunteer-events"
                        })
                });


            });
        </script>

    </body>

</html>


  